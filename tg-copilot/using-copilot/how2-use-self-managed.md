![TigerGraph Logo](https://www.tigergraph.com/wp-content/uploads/2020/05/TG_LOGO.svg) [Docs](https://docs.tigergraph.com/home)
Page 1[Prev](https://docs.tigergraph.com/tg-copilot/using-copilot/how2-use-self-managed)[Next](https://docs.tigergraph.com/tg-copilot/using-copilot/how2-use-self-managed)
Search by [Algolia](https://www.algolia.com/docsearch)
[Products](https://docs.tigergraph.com/tg-copilot/using-copilot/how2-use-self-managed)
TigerGraph Savanna
[TigerGraph Savanna](https://docs.tigergraph.com/savanna/main/overview/) [(_TigerGraph Cloud Classic_)](https://docs.tigergraph.com/cloud/main/start/overview)
TigerGraph Server
[TigerGraph DB](https://docs.tigergraph.com/tigergraph-server/4.2/intro/)
TigerGraph Suite
[GraphStudio and Admin Portal](https://docs.tigergraph.com/gui/4.2/intro/) [Insights](https://docs.tigergraph.com/insights/4.2/intro/) [GSQL Web Shell](https://docs.tigergraph.com/tigergraph-server/current/gsql-shell/web)
Query Languages
[GSQL Language Reference](https://docs.tigergraph.com/gsql-ref/4.2/intro/) [GSQL Web Shell](https://docs.tigergraph.com/tigergraph-server/current/gsql-shell/web) [OpenCypher](https://docs.tigergraph.com/gsql-ref/current/opencypher-in-gsql)
AI & Graph Intelligence
[Graph Data Science Library](https://docs.tigergraph.com/graph-ml/3.10/intro/) [Hybrid Graph+Vector Search](https://docs.tigergraph.com/gsql-ref/current/vector/)
Connectors and APIs
[Data Connectors](https://docs.tigergraph.com/tigergraph-server/current/data-loading) [pyTigerGraph](https://docs.tigergraph.com/pytigergraph/1.8/intro/) [TigerGraph GraphQL Service](https://docs.tigergraph.com/graphql/3.9/) [JDBC Driver](https://github.com/tigergraph/ecosys/tree/master/tools/etl/tg-jdbc-driver)
Legacy Documentation
[ Legacy Documentation ](https://docs-legacy.tigergraph.com)
[Resources](https://docs.tigergraph.com/tg-copilot/using-copilot/how2-use-self-managed)
[Developer Site](https://dev.tigergraph.com/) [Community Forum](https://community.tigergraph.com/) [Knowledge Base](https://tigergraph.freshdesk.com/support/solutions)
[Download](https://dl.tigergraph.com)
[ TG Savanna](https://savanna.tgcloud.io)
### [TigerGraph CoPilot](https://docs.tigergraph.com/tg-copilot/intro/)
  *     * [Introduction](https://docs.tigergraph.com/tg-copilot/intro/)
      * [CoPilot Overview](https://docs.tigergraph.com/tg-copilot/intro/overview)
  *     * [TigerGraph CoPilot Release Notes](https://docs.tigergraph.com/tg-copilot/release-notes/)
  *     * [Get Started with TigerGraph CoPilot](https://docs.tigergraph.com/tg-copilot/getstarted/)
      * [On Cloud](https://docs.tigergraph.com/tg-copilot/getstarted/oncloud)
      * [Self-Managed](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed)
  *     * [Using CoPilot](https://docs.tigergraph.com/tg-copilot/using-copilot/)
      * Access CoPilot
        * [On Cloud](https://docs.tigergraph.com/tg-copilot/using-copilot/how2-use-on-cloud)
        * [Chatbot](https://docs.tigergraph.com/tg-copilot/using-copilot/how2-use-chat)
        * [APIs](https://docs.tigergraph.com/tg-copilot/using-copilot/how2-use-api)
      * Use Case
        * [Natural Language Query](https://docs.tigergraph.com/tg-copilot/using-copilot/how2-natural-language-query)
        * [Build Knowledge Graph](https://docs.tigergraph.com/tg-copilot/using-copilot/how2-build-knowledge-graph)
        * [RAG](https://docs.tigergraph.com/tg-copilot/using-copilot/how2-graphrag)
  *     * [Testing](https://docs.tigergraph.com/tg-copilot/testing/)
  *     * [Customization and Extensibility](https://docs.tigergraph.com/tg-copilot/customization-extensibility/)
      * [LangChain](https://docs.tigergraph.com/tg-copilot/customization-extensibility/add-langchaintool)
      * [LLM Service](https://docs.tigergraph.com/tg-copilot/customization-extensibility/add-new-llm)
      * [Embedding Service](https://docs.tigergraph.com/tg-copilot/customization-extensibility/add-embedding-service)
      * [Test Suite](https://docs.tigergraph.com/tg-copilot/customization-extensibility/add-new-tests)
  *     * [Architecture](https://docs.tigergraph.com/tg-copilot/intro/architecture-overview)
      * [InquiryAI](https://docs.tigergraph.com/tg-copilot/intro/inquiryai-overview)
      * [SupportAI](https://docs.tigergraph.com/tg-copilot/intro/supportai-overview)
  *     * [Contribute](https://docs.tigergraph.com/tg-copilot/contribution/)
  *     * [Resources](https://docs.tigergraph.com/tg-copilot/resources/)
      * [Glossary](https://docs.tigergraph.com/tg-copilot/resources/glossary)
      * [Support](https://docs.tigergraph.com/tg-copilot/resources/support)


TigerGraph CoPilot main
[Fully-Managed: Savanna](https://docs.tigergraph.com/savanna/main/overview/)
[Self-Managed: TigerGraph DB](https://docs.tigergraph.com/tigergraph-server/4.2/intro/)
[Install](https://docs.tigergraph.com/tigergraph-server/current/getting-started/) [Manage](https://docs.tigergraph.com/tigergraph-server/current/system-management/)
Tutorials & Guides
[GSQL](https://github.com/tigergraph/ecosys/blob/master/tutorials/GSQL.md) [OpenCypher in GSQL](https://github.com/tigergraph/ecosys/blob/master/tutorials/Cypher.md) [Hybrid Vector Search](https://github.com/tigergraph/ecosys/blob/master/tutorials/VectorSearch.md)
Reference Manuals
[GSQL](https://docs.tigergraph.com/gsql-ref/4.2/intro/) [OpenCypher](https://docs.tigergraph.com/gsql-ref/current/opencypher-in-gsql/) [Vector](https://docs.tigergraph.com/gsql-ref/current/vector/) [REST APIs](https://docs.tigergraph.com/tigergraph-server/current/api/) [Configuration Parameters](https://docs.tigergraph.com/tigergraph-server/current/reference/configuration-parameters)
Visual Tools
[Develop: GraphStudio](https://docs.tigergraph.com/gui/4.2/intro/) [Administer: Admin Portal](https://docs.tigergraph.com/gui/4.2/intro/) [Visualize: Insights](https://docs.tigergraph.com/insights/4.2/intro/)
AI & Data Science
[Graph Algorithms](https://docs.tigergraph.com/graph-ml/3.10/intro/) [pyTigerGraph](https://docs.tigergraph.com/pytigergraph/1.8/intro/) [TigerGraphX](https://github.com/tigergraph/ecosys/blob/master/tutorials/TigerGraphX.md) [ML Workbench](https://docs.tigergraph.com/ml-workbench/1.4/intro/) [CoPilot](https://docs.tigergraph.com/tg-copilot/intro/)
  * [TigerGraph DB](https://docs.tigergraph.com/tigergraph-server/4.2/intro/)
    * [4.2 Pre](https://docs.tigergraph.com/tigergraph-server/4.2/intro/)
    * [4.1](https://docs.tigergraph.com/tigergraph-server/4.1/intro/)
    * [3.11](https://docs.tigergraph.com/tigergraph-server/3.11/intro/)
    * [3.10](https://docs.tigergraph.com/tigergraph-server/3.10/intro/)
    * [3.9](https://docs.tigergraph.com/tigergraph-server/3.9/intro/)
    * [3.6](https://docs.tigergraph.com/tigergraph-server/3.6/intro/)
  * [GSQL Language Reference](https://docs.tigergraph.com/gsql-ref/4.2/intro/)
    * [4.2 Pre](https://docs.tigergraph.com/gsql-ref/4.2/intro/)
    * [4.1](https://docs.tigergraph.com/gsql-ref/4.1/intro/)
    * [3.11](https://docs.tigergraph.com/gsql-ref/3.11/intro/)
    * [3.10](https://docs.tigergraph.com/gsql-ref/3.10/intro/)
    * [3.9](https://docs.tigergraph.com/gsql-ref/3.9/intro/)
    * [3.6](https://docs.tigergraph.com/gsql-ref/3.6/intro/intro)
  * [TigerGraph Savanna](https://docs.tigergraph.com/savanna/main/overview/)
  * [GraphStudio and Admin Portal](https://docs.tigergraph.com/gui/4.2/intro/)
    * [4.2 Pre](https://docs.tigergraph.com/gui/4.2/intro/)
    * [4.1](https://docs.tigergraph.com/gui/4.1/intro/)
    * [3.11](https://docs.tigergraph.com/gui/3.11/intro/)
    * [3.10](https://docs.tigergraph.com/gui/3.10/intro/)
    * [3.9](https://docs.tigergraph.com/gui/3.9/intro/)
    * [3.6](https://docs.tigergraph.com/gui/3.6/graphstudio/overview)
  * [Insights](https://docs.tigergraph.com/insights/4.2/intro/)
    * [4.2 Pre](https://docs.tigergraph.com/insights/4.2/intro/)
    * [4.1](https://docs.tigergraph.com/insights/4.1/intro/)
    * [3.11](https://docs.tigergraph.com/insights/3.11/intro/)
    * [3.10](https://docs.tigergraph.com/insights/3.10/intro/)
    * [3.9](https://docs.tigergraph.com/insights/3.9/intro/)
  * [Graph Data Science Library](https://docs.tigergraph.com/graph-ml/3.10/intro/)
    * [3.10](https://docs.tigergraph.com/graph-ml/3.10/intro/)
  * [pyTigerGraph](https://docs.tigergraph.com/pytigergraph/1.8/intro/)
    * [1.8](https://docs.tigergraph.com/pytigergraph/1.8/intro/)
    * [1.7](https://docs.tigergraph.com/pytigergraph/1.7/intro/)
    * [1.6](https://docs.tigergraph.com/pytigergraph/1.6/intro/)
  * [TigerGraph ML Workbench](https://docs.tigergraph.com/ml-workbench/1.4/intro/)
    * [1.4](https://docs.tigergraph.com/ml-workbench/1.4/intro/)
  * [TigerGraph GraphQL Service](https://docs.tigergraph.com/graphql/3.9/)
    * [3.9](https://docs.tigergraph.com/graphql/3.9/)
  * [TigerGraph CoPilot](https://docs.tigergraph.com/tg-copilot/intro/)
    * [main](https://docs.tigergraph.com/tg-copilot/intro/)
  * [TigerGraph Cloud Classic](https://docs.tigergraph.com/cloud/main/start/overview)


[](https://docs.tigergraph.com/home/)
  * [TigerGraph CoPilot main](https://docs.tigergraph.com/tg-copilot/intro/)
  * [How to use the Self-Managed TigerGraph CoPilot](https://docs.tigergraph.com/tg-copilot/using-copilot/how2-use-self-managed)


[Edit this Page](https://github.com/tigergraph/copilot-docs/edit/main/modules/using-copilot/pages/how2-use-self-managed.adoc)
### Contents
  * [Using A Self-Managed Service](https://docs.tigergraph.com/tg-copilot/using-copilot/how2-use-self-managed#_using_a_self_managed_service)
  * [Deployment](https://docs.tigergraph.com/tg-copilot/using-copilot/how2-use-self-managed#_deployment)
  * [Next Steps](https://docs.tigergraph.com/tg-copilot/using-copilot/how2-use-self-managed#_next_steps)


# How to use the Self-Managed TigerGraph CoPilot
### Contents
  * [Using A Self-Managed Service](https://docs.tigergraph.com/tg-copilot/using-copilot/how2-use-self-managed#_using_a_self_managed_service)
  * [Deployment](https://docs.tigergraph.com/tg-copilot/using-copilot/how2-use-self-managed#_deployment)
  * [Next Steps](https://docs.tigergraph.com/tg-copilot/using-copilot/how2-use-self-managed#_next_steps)


Using TigerGraph CoPilot self-managed service is intuitive and straight forward. Follow any of the five methods below.
## [](https://docs.tigergraph.com/tg-copilot/using-copilot/how2-use-self-managed#_using_a_self_managed_service)Using A Self-Managed Service
  * With Swagger Doc
  * With Chat
  * With pyTigerGraph
  * With LangChain
  * With Rest API


Navigate to `http://localhost/docs[](http://localhost/docs)` when the Docker container is running.
![SwaggerDocUX](https://docs.tigergraph.com/tg-copilot/using-copilot/_images/SwaggerDocUX.png)
Navigate to `http://localhost/graphname/chat[](http://localhost/graphname/chat)` when the Docker container is running, where graphname is the name of the graph you
![CoPilot UX Demo](https://docs.tigergraph.com/tg-copilot/using-copilot/_images/CoPilot-UX-Demo.png)
This guide assumes you are already familiar with pyTigerGraph. If not, see our documentation [Getting Started](https://docs.tigergraph.com/pytigergraph/1.6/getting-started/) with pyTigerGraph.   
---  
  1. Update pyTigerGraph to utilize the latest build:
```
pip install -U git+https://github.com/tigergraph/pyTigerGraph.git
python![copy icon](https://docs.tigergraph.com/_/img/octicons-16.svg#view-clippy)Copied!

```

  2. Next, configure the endpoints with a `TigerGraphConnection`.
As in this example code snippets below:
Import `TigerGraphConnection`:
```
from pyTigerGraph import TigerGraphConnection
python![copy icon](https://docs.tigergraph.com/_/img/octicons-16.svg#view-clippy)Copied!

```

Create a connection to the database.
```
conn = TigerGraphConnection(host="DATABASE_HOST_HERE", graphname="GRAPH_NAME_HERE", username="USERNAME_HERE", password="PASSWORD_HERE")
python![copy icon](https://docs.tigergraph.com/_/img/octicons-16.svg#view-clippy)Copied!

```

Configure InquiryAI host:
```
conn.ai.configureInquiryAIHost("INQUIRYAI_HOST_HERE")
python![copy icon](https://docs.tigergraph.com/_/img/octicons-16.svg#view-clippy)Copied!

```

Retrieve Top-K Docs from Library:
```
# `top_k` parameter optional
conn.ai.retrieveDocs("How many papers are there?", top_k = 5)
python![copy icon](https://docs.tigergraph.com/_/img/octicons-16.svg#view-clippy)Copied!

```

Run a natural language query:
```
print(conn.ai.query("How many papers are there?"))
# prints: {'natural_language_response': 'There are 736389 papers.', 'answered_question': True, 'query_sources': {'function_call': "getVertexCount('Paper')", 'result': 736389}}
python![copy icon](https://docs.tigergraph.com/_/img/octicons-16.svg#view-clippy)Copied!

```

Register a custom query:
```
# Prompt for PageRank query - could be read in as JSON file.
pr_prompt = {
  "function_header": "tg_pagerank",
  "description": "Determines the importance or influence of each vertex based on its connections to other vertices.",
  "docstring": "The PageRank algorithm measures the influence of each vertex on every other vertex. PageRank influence is defined recursively: a vertex’s influence is based on the influence of the vertices which refer to it. A vertex’s influence tends to increase if either of these conditions are met:\n* It has more referring vertices\n* Its referring vertices have higher influence\nTo run this algorithm, use `runInstalledQuery('tg_pagerank', params={'v_type': 'INSERT_V_TYPE_HERE', 'e_type': 'INSERT_E_TYPE_HERE', 'top_k': INSERT_TOP_K_HERE})`, where the parameters are:\n* 'v_type': The vertex type to run the algorithm on.\n* 'e_type': The edge type to run the algorithm on.\n* 'top_k': The number of top scoring vertices to return to the user.",
  "param_types": {
    "v_type": "str",
    "e_type": "str",
    "top_k": "int"
  }
}
python![copy icon](https://docs.tigergraph.com/_/img/octicons-16.svg#view-clippy)Copied!

```

Register Query:
```
conn.ai.registerCustomQuery(pr_prompt["function_header"], pr_prompt["description"], pr_prompt["docstring"], pr_prompt["param_types"])
python![copy icon](https://docs.tigergraph.com/_/img/octicons-16.svg#view-clippy)Copied!

```

Run Query:
```
print(conn.ai.query("What are the 5 most influential papers by citations?"))
# prints: {'natural_language_response': 'The top 5 most cited papers are:\n\n1. [Title of paper with Vertex_ID 428523]\n2. [Title of paper with Vertex_ID 384889]\n3. [Title of paper with Vertex_ID 377502]\n4. [Title of paper with Vertex_ID 61855]\n5. [Title of paper with Vertex_ID 416200]', 'answered_question': True, 'query_sources': {'function_call': "runInstalledQuery('tg_pagerank', params={'v_type': 'Paper', 'e_type': 'CITES', 'top_k': 5})", 'result': [{'@@top_scores_heap': [{'Vertex_ID': '428523', 'score': 392.8731}, {'Vertex_ID': '384889', 'score': 251.8021}, {'Vertex_ID': '377502', 'score': 149.1018}, {'Vertex_ID': '61855', 'score': 129.7406}, {'Vertex_ID': '416200', 'score': 129.2286}]}]}}
python![copy icon](https://docs.tigergraph.com/_/img/octicons-16.svg#view-clippy)Copied!

```



To use LangChain with InquiryAI:
  1. First install the LangChain fork here in your Python environment:
```
pip install git+https://github.com/langchain-ai/langchain.git
python![copy icon](https://docs.tigergraph.com/_/img/octicons-16.svg#view-clippy)Copied!

```

  2. Then, you can get answers from the graph with the example code snipets below:
Import pyTigerGraph
```
import pyTigerGraph as tg
python![copy icon](https://docs.tigergraph.com/_/img/octicons-16.svg#view-clippy)Copied!

```

Create instance of the `TigerGraphConnection` (replace example strings like "DATABASE_HOST_HERE" with your specific information):
```
conn = tg.TigerGraphConnection(host="DATABASE_HOST_HERE", graphname="GRAPH_NAME_HERE", username="USERNAME_HERE", password="PASSWORD_HERE")
python![copy icon](https://docs.tigergraph.com/_/img/octicons-16.svg#view-clippy)Copied!

```

Configure InquiryAI Host
```
conn.ai.configureInquiryAIHost("INQUIRYAI_HOST_HERE")
python![copy icon](https://docs.tigergraph.com/_/img/octicons-16.svg#view-clippy)Copied!

```

Configure LangChain and ask your question and print results:
```
from langchain_community.graphs import TigerGraph
graph = TigerGraph(conn)
result = graph.query("How many servers are there?")
print(result)
# {'natural_language_response': 'There are 46148 servers.',
# 'answered_question': True,
# 'query_sources': {'function_call': 'getVertexCount(vertexType="BareMetalNode")',
#          'result': 46148}
python![copy icon](https://docs.tigergraph.com/_/img/octicons-16.svg#view-clippy)Copied!

```



The REST API can be used to interact with the service.
The endpoints can be found on the Swagger page. Navigate to <http://localhost/docs> when the Docker container is running.
## [](https://docs.tigergraph.com/tg-copilot/using-copilot/how2-use-self-managed#_deployment)Deployment
TigerGraph CoPilot beta is for personal or R&D use and not for production use.  
---  
If you wish to deploy TigerGraph CoPilot and disable the Swagger documentation page, you can do so by setting the `PRODUCTION` environment variable to `true` in the Docker run command.
```
docker run -d -v $(pwd)/configs/llm_config.json:/llm_config.json -v $(pwd)/configs/db_config.json:/db_config.json -e PRODUCTION=true --name copilot -p 80:80 tigergraphml/copilot:latest
![copy icon](https://docs.tigergraph.com/_/img/octicons-16.svg#view-clippy)Copied!

```

## [](https://docs.tigergraph.com/tg-copilot/using-copilot/how2-use-self-managed#_next_steps)Next Steps
Next, go to [Testing TigerGraph CoPilot](https://docs.tigergraph.com/tg-copilot/testing/) to learn how to test TigerGraph CoPilot.
Return to [TigerGraph CoPilot](https://docs.tigergraph.com/tg-copilot/intro/) for a different topic.
3 Twin Dolphin Drive, Ste 225 Redwood City, CA 94065 
Copyright © 2025 TigerGraph
  * ## Resources
    * [Support](https://www.tigergraph.com/support/)
    * [Community](https://community.tigergraph.com/)
    * [Developer Site](https://dev.tigergraph.com/)
    * [Test Drive](https://testdrive.tigergraph.com/)
  * ## Social
    * [Linkedin](https://www.linkedin.com/company/tigergraph/)
    * [Facebook](https://www.facebook.com/TigerGraphDB/)
    * [Twitter](https://twitter.com/tigergraphdb)
  * ## Legal
    * [Privacy Policy](https://www.tigergraph.com/privacy-policy/)
    * [Terms of Use](https://www.tigergraph.com/terms/)
    * [Sitemap](https://docs.tigergraph.com/sitemap.xml)


