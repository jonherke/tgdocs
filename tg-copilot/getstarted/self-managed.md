![TigerGraph Logo](https://www.tigergraph.com/wp-content/uploads/2020/05/TG_LOGO.svg) [Docs](https://docs.tigergraph.com/home)
Page 1[Prev](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed)[Next](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed)
Search by [Algolia](https://www.algolia.com/docsearch)
[Products](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed)
TigerGraph Savanna
[TigerGraph Savanna](https://docs.tigergraph.com/savanna/main/overview/) [(_TigerGraph Cloud Classic_)](https://docs.tigergraph.com/cloud/main/start/overview)
TigerGraph Server
[TigerGraph DB](https://docs.tigergraph.com/tigergraph-server/4.2/intro/)
TigerGraph Suite
[GraphStudio and Admin Portal](https://docs.tigergraph.com/gui/4.2/intro/) [Insights](https://docs.tigergraph.com/insights/4.2/intro/) [GSQL Web Shell](https://docs.tigergraph.com/tigergraph-server/current/gsql-shell/web)
Query Languages
[GSQL Language Reference](https://docs.tigergraph.com/gsql-ref/4.2/intro/) [GSQL Web Shell](https://docs.tigergraph.com/tigergraph-server/current/gsql-shell/web) [OpenCypher](https://docs.tigergraph.com/gsql-ref/current/opencypher-in-gsql)
AI & Graph Intelligence
[Graph Data Science Library](https://docs.tigergraph.com/graph-ml/3.10/intro/) [Hybrid Graph+Vector Search](https://docs.tigergraph.com/gsql-ref/current/vector/)
Connectors and APIs
[Data Connectors](https://docs.tigergraph.com/tigergraph-server/current/data-loading) [pyTigerGraph](https://docs.tigergraph.com/pytigergraph/1.8/intro/) [TigerGraph GraphQL Service](https://docs.tigergraph.com/graphql/3.9/) [JDBC Driver](https://github.com/tigergraph/ecosys/tree/master/tools/etl/tg-jdbc-driver)
Legacy Documentation
[ Legacy Documentation ](https://docs-legacy.tigergraph.com)
[Resources](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed)
[Developer Site](https://dev.tigergraph.com/) [Community Forum](https://community.tigergraph.com/) [Knowledge Base](https://tigergraph.freshdesk.com/support/solutions)
[Download](https://dl.tigergraph.com)
[ TG Savanna](https://savanna.tgcloud.io)
### [TigerGraph CoPilot](https://docs.tigergraph.com/tg-copilot/intro/)
  *     * [Introduction](https://docs.tigergraph.com/tg-copilot/intro/)
      * [CoPilot Overview](https://docs.tigergraph.com/tg-copilot/intro/overview)
  *     * [TigerGraph CoPilot Release Notes](https://docs.tigergraph.com/tg-copilot/release-notes/)
  *     * [Get Started with TigerGraph CoPilot](https://docs.tigergraph.com/tg-copilot/getstarted/)
      * [On Cloud](https://docs.tigergraph.com/tg-copilot/getstarted/oncloud)
      * [Self-Managed](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed)
  *     * [Using CoPilot](https://docs.tigergraph.com/tg-copilot/using-copilot/)
      * Access CoPilot
        * [On Cloud](https://docs.tigergraph.com/tg-copilot/using-copilot/how2-use-on-cloud)
        * [Chatbot](https://docs.tigergraph.com/tg-copilot/using-copilot/how2-use-chat)
        * [APIs](https://docs.tigergraph.com/tg-copilot/using-copilot/how2-use-api)
      * Use Case
        * [Natural Language Query](https://docs.tigergraph.com/tg-copilot/using-copilot/how2-natural-language-query)
        * [Build Knowledge Graph](https://docs.tigergraph.com/tg-copilot/using-copilot/how2-build-knowledge-graph)
        * [RAG](https://docs.tigergraph.com/tg-copilot/using-copilot/how2-graphrag)
  *     * [Testing](https://docs.tigergraph.com/tg-copilot/testing/)
  *     * [Customization and Extensibility](https://docs.tigergraph.com/tg-copilot/customization-extensibility/)
      * [LangChain](https://docs.tigergraph.com/tg-copilot/customization-extensibility/add-langchaintool)
      * [LLM Service](https://docs.tigergraph.com/tg-copilot/customization-extensibility/add-new-llm)
      * [Embedding Service](https://docs.tigergraph.com/tg-copilot/customization-extensibility/add-embedding-service)
      * [Test Suite](https://docs.tigergraph.com/tg-copilot/customization-extensibility/add-new-tests)
  *     * [Architecture](https://docs.tigergraph.com/tg-copilot/intro/architecture-overview)
      * [InquiryAI](https://docs.tigergraph.com/tg-copilot/intro/inquiryai-overview)
      * [SupportAI](https://docs.tigergraph.com/tg-copilot/intro/supportai-overview)
  *     * [Contribute](https://docs.tigergraph.com/tg-copilot/contribution/)
  *     * [Resources](https://docs.tigergraph.com/tg-copilot/resources/)
      * [Glossary](https://docs.tigergraph.com/tg-copilot/resources/glossary)
      * [Support](https://docs.tigergraph.com/tg-copilot/resources/support)


TigerGraph CoPilot main
[Fully-Managed: Savanna](https://docs.tigergraph.com/savanna/main/overview/)
[Self-Managed: TigerGraph DB](https://docs.tigergraph.com/tigergraph-server/4.2/intro/)
[Install](https://docs.tigergraph.com/tigergraph-server/current/getting-started/) [Manage](https://docs.tigergraph.com/tigergraph-server/current/system-management/)
Tutorials & Guides
[GSQL](https://github.com/tigergraph/ecosys/blob/master/tutorials/GSQL.md) [OpenCypher in GSQL](https://github.com/tigergraph/ecosys/blob/master/tutorials/Cypher.md) [Hybrid Vector Search](https://github.com/tigergraph/ecosys/blob/master/tutorials/VectorSearch.md)
Reference Manuals
[GSQL](https://docs.tigergraph.com/gsql-ref/4.2/intro/) [OpenCypher](https://docs.tigergraph.com/gsql-ref/current/opencypher-in-gsql/) [Vector](https://docs.tigergraph.com/gsql-ref/current/vector/) [REST APIs](https://docs.tigergraph.com/tigergraph-server/current/api/) [Configuration Parameters](https://docs.tigergraph.com/tigergraph-server/current/reference/configuration-parameters)
Visual Tools
[Develop: GraphStudio](https://docs.tigergraph.com/gui/4.2/intro/) [Administer: Admin Portal](https://docs.tigergraph.com/gui/4.2/intro/) [Visualize: Insights](https://docs.tigergraph.com/insights/4.2/intro/)
AI & Data Science
[Graph Algorithms](https://docs.tigergraph.com/graph-ml/3.10/intro/) [pyTigerGraph](https://docs.tigergraph.com/pytigergraph/1.8/intro/) [TigerGraphX](https://github.com/tigergraph/ecosys/blob/master/tutorials/TigerGraphX.md) [ML Workbench](https://docs.tigergraph.com/ml-workbench/1.4/intro/) [CoPilot](https://docs.tigergraph.com/tg-copilot/intro/)
  * [TigerGraph DB](https://docs.tigergraph.com/tigergraph-server/4.2/intro/)
    * [4.2 Pre](https://docs.tigergraph.com/tigergraph-server/4.2/intro/)
    * [4.1](https://docs.tigergraph.com/tigergraph-server/4.1/intro/)
    * [3.11](https://docs.tigergraph.com/tigergraph-server/3.11/intro/)
    * [3.10](https://docs.tigergraph.com/tigergraph-server/3.10/intro/)
    * [3.9](https://docs.tigergraph.com/tigergraph-server/3.9/intro/)
    * [3.6](https://docs.tigergraph.com/tigergraph-server/3.6/intro/)
  * [GSQL Language Reference](https://docs.tigergraph.com/gsql-ref/4.2/intro/)
    * [4.2 Pre](https://docs.tigergraph.com/gsql-ref/4.2/intro/)
    * [4.1](https://docs.tigergraph.com/gsql-ref/4.1/intro/)
    * [3.11](https://docs.tigergraph.com/gsql-ref/3.11/intro/)
    * [3.10](https://docs.tigergraph.com/gsql-ref/3.10/intro/)
    * [3.9](https://docs.tigergraph.com/gsql-ref/3.9/intro/)
    * [3.6](https://docs.tigergraph.com/gsql-ref/3.6/intro/intro)
  * [TigerGraph Savanna](https://docs.tigergraph.com/savanna/main/overview/)
  * [GraphStudio and Admin Portal](https://docs.tigergraph.com/gui/4.2/intro/)
    * [4.2 Pre](https://docs.tigergraph.com/gui/4.2/intro/)
    * [4.1](https://docs.tigergraph.com/gui/4.1/intro/)
    * [3.11](https://docs.tigergraph.com/gui/3.11/intro/)
    * [3.10](https://docs.tigergraph.com/gui/3.10/intro/)
    * [3.9](https://docs.tigergraph.com/gui/3.9/intro/)
    * [3.6](https://docs.tigergraph.com/gui/3.6/graphstudio/overview)
  * [Insights](https://docs.tigergraph.com/insights/4.2/intro/)
    * [4.2 Pre](https://docs.tigergraph.com/insights/4.2/intro/)
    * [4.1](https://docs.tigergraph.com/insights/4.1/intro/)
    * [3.11](https://docs.tigergraph.com/insights/3.11/intro/)
    * [3.10](https://docs.tigergraph.com/insights/3.10/intro/)
    * [3.9](https://docs.tigergraph.com/insights/3.9/intro/)
  * [Graph Data Science Library](https://docs.tigergraph.com/graph-ml/3.10/intro/)
    * [3.10](https://docs.tigergraph.com/graph-ml/3.10/intro/)
  * [pyTigerGraph](https://docs.tigergraph.com/pytigergraph/1.8/intro/)
    * [1.8](https://docs.tigergraph.com/pytigergraph/1.8/intro/)
    * [1.7](https://docs.tigergraph.com/pytigergraph/1.7/intro/)
    * [1.6](https://docs.tigergraph.com/pytigergraph/1.6/intro/)
  * [TigerGraph ML Workbench](https://docs.tigergraph.com/ml-workbench/1.4/intro/)
    * [1.4](https://docs.tigergraph.com/ml-workbench/1.4/intro/)
  * [TigerGraph GraphQL Service](https://docs.tigergraph.com/graphql/3.9/)
    * [3.9](https://docs.tigergraph.com/graphql/3.9/)
  * [TigerGraph CoPilot](https://docs.tigergraph.com/tg-copilot/intro/)
    * [main](https://docs.tigergraph.com/tg-copilot/intro/)
  * [TigerGraph Cloud Classic](https://docs.tigergraph.com/cloud/main/start/overview)


[](https://docs.tigergraph.com/home/)
  * [TigerGraph CoPilot main](https://docs.tigergraph.com/tg-copilot/intro/)
  * [Get Started with TigerGraph CoPilot](https://docs.tigergraph.com/tg-copilot/getstarted/)
  * [Self-Managed](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed)


[Edit this Page](https://github.com/tigergraph/copilot-docs/edit/main/modules/getstarted/pages/self-managed.adoc)
### Contents
  * [Prerequisites](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed#_prerequisites)
  * [1) Setup](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed#_1_setup)
  * [2) Set up Configuration Files](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed#_2_set_up_configuration_files)
  * [TigerGraph Database Configuration](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed#_tigergraph_database_configuration)
  * [LLM Provider Configuration](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed#_llm_provider_configuration)
  * [Milvus Configuration](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed#_milvus_configuration)
  * [Chat History Configuration](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed#_chat_history_configuration)
  * [3) (Optional) Logging](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed#_3_optional_logging)
  * [Create log configuration file](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed#_create_log_configuration_file)
  * [Configure Logging Level in Dockerfile](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed#_configure_logging_level_in_dockerfile)
  * [4) Start CoPilot](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed#_4_start_copilot)
  * [5) Install UDFs](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed#_5_install_udfs)
  * [Next Steps](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed#_next_steps)


# Self-Managed TigerGraph CoPilot
### Contents
  * [Prerequisites](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed#_prerequisites)
  * [1) Setup](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed#_1_setup)
  * [2) Set up Configuration Files](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed#_2_set_up_configuration_files)
  * [TigerGraph Database Configuration](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed#_tigergraph_database_configuration)
  * [LLM Provider Configuration](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed#_llm_provider_configuration)
  * [Milvus Configuration](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed#_milvus_configuration)
  * [Chat History Configuration](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed#_chat_history_configuration)
  * [3) (Optional) Logging](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed#_3_optional_logging)
  * [Create log configuration file](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed#_create_log_configuration_file)
  * [Configure Logging Level in Dockerfile](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed#_configure_logging_level_in_dockerfile)
  * [4) Start CoPilot](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed#_4_start_copilot)
  * [5) Install UDFs](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed#_5_install_udfs)
  * [Next Steps](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed#_next_steps)


TigerGraph CoPilot is an open-source project on GitHub [<https://github.com/tigergraph/CoPilot>] which can be deployed to your own infrastructure.
If you don’t need to extend the source code of CoPilot, the quickest way is to deploy its Docker images with the Docker Compose file in the repo.  
---  
You will need the following prerequisites.
## [](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed#_prerequisites)Prerequisites
In order to utilize TigerGraph CoPilot, you will need:
  * To install:
    * Docker
    * TigerGraph DB 3.9+. (For 3.x, you will need to install a few user defined functions (UDFs). Please see Step 5 below for details.)
For installing Docker and a TigerGraph DB, see our documentation on [Get Started with Docker](https://docs.tigergraph.com/tigergraph-server/4.2/getting-started/docker).
For an example graph schema and data, see the [GSQL V3 Tutorial](https://github.com/tigergraph/ecosys/blob/master/demos/guru_scripts/docker/tutorial/4.x/README.md).
  * An LLM provider and its API key
An LLM provider refers to a company or organization that offers Large Language Models (LLMs) as a service. The API key verifies the identity of the requester, ensuring that the request is coming from a registered and authorized user or application.
Currently, TigerGraph CoPilot Supports:
    * [AWS Bedrock](https://aws.amazon.com/bedrock/)
    * [Azure](https://azure.microsoft.com/en-us)
    * [GCP](https://cloud.google.com/ai/llms?hl=en)
    * [OpenAI](https://openai.com)
    * [Ollama](https://ollama.com/library?sort=popular)
    * [HuggingFace](https://huggingface.co/models)
    * Groq
Only one provider is required.  
---  


As an example of how to obtain your API key from providers such as OpenAI, please refer to <https://platform.openai.com/api-keys>.
## [](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed#_1_setup)1) Setup
First, users need to get the TigerGraph CoPilot images and prep the environment.
You can either:
  * Download the file [docker-compose.yml](https://raw.githubusercontent.com/tigergraph/copilot/main/docker-compose.yml) directly.
  * Or, clone the repo `git clone https://github.com/tigergraph/CoPilot[](https://github.com/tigergraph/CoPilot)`.


The Docker Compose file contains all dependencies for CoPilot including a Milvus database. If you do not need a particular service, you make edit the Compose file to remove it or set its scale to 0 when running the Compose file (details later). Moreover, CoPilot comes with a Swagger API documentation page when it is deployed. If you wish to disable it, you can set the `PRODUCTION` environment variable to true for the CoPilot service in the Compose file.
## [](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed#_2_set_up_configuration_files)2) Set up Configuration Files
Next, in the same directory as the Docker Compose file is in, create and fill in the following configuration files.
  * `configs/db_config.json`
  * `configs/llm_config.json`
  * `configs/milvus_config.json`
  * `configs/chat_config.json`


### [](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed#_tigergraph_database_configuration)TigerGraph Database Configuration
Copy the below into `configs/db_config.json` and edit the `hostname` and `getToken` fields to match your database’s configuration.
Set the `timeout`, `memory threshold`, and `thread limit` parameters to control how much of the database’s resources are consumed when answering a question.
  * If you use the Docker Compose file as is, you don’t need to change anything. “ecc” and “chat_history_api” are the addresses of internal components of CoPilot.
  * If [token authentication](https://docs.tigergraph.com/tigergraph-server/4.2/user-access/enabling-user-authentication#_enable_restpp_authentication) is enabled in TigerGraph, set `getToken` to `true`.

  
---  
```
{
  "hostname": "http://tigergraph",
  "getToken": true,
  "default_timeout": 300,
  "default_mem_threshold": 5000,
  "default_thread_limit": 8,
  "ecc": "http://eventual-consistency-service:8001",
  "chat_history_api": "http://chat-history:8002"
}
![copy icon](https://docs.tigergraph.com/_/img/octicons-16.svg#view-clippy)Copied!

```

### [](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed#_llm_provider_configuration)LLM Provider Configuration
Next, in the `configs/llm_config.json` file, paste in your LLM provider’s JSON config template from below, and fill out the appropriate fields.
  * OpenAI
  * GCP
  * Azure
  * AWS Bedrock
  * Ollama
  * Hugging Face
  * Groq


In addition to the `OPENAI_API_KEY`, the `llm_model` and `model_name`, can be edited to match your specific configuration details.
```
{
  "model_name": "GPT-4",
  "embedding_service": {
    "embedding_model_service": "openai",
    "authentication_configuration": {
      "OPENAI_API_KEY": "YOUR_OPENAI_API_KEY_HERE"
    }
  },
  "completion_service": {
    "llm_service": "openai",
    "llm_model": "gpt-4-0613",
    "authentication_configuration": {
      "OPENAI_API_KEY": "YOUR_OPENAI_API_KEY_HERE"
    },
  "model_kwargs": {
    "temperature": 0
  },
  "prompt_path": "./app/prompts/openai_gpt4/"
  }
}
![copy icon](https://docs.tigergraph.com/_/img/octicons-16.svg#view-clippy)Copied!

```

  1. Follow the GCP authentication information found [here](https://cloud.google.com/docs/authentication/application-default-credentials#GAC) and create a `Service Account` with `VertexAI` credentials.
  2. Then, add the following to the `docker run` command:
```
-v $(pwd)/configs/SERVICE_ACCOUNT_CREDS.json:/SERVICE_ACCOUNT_CREDS.json -e GOOGLE_APPLICATION_CREDENTIALS=/SERVICE_ACCOUNT_CREDS.json
![copy icon](https://docs.tigergraph.com/_/img/octicons-16.svg#view-clippy)Copied!

```

  3. Finally, your JSON config should as below:
```
{
  "model_name": "GCP-text-bison",
  "embedding_service": {
    "embedding_model_service": "vertexai",
    "authentication_configuration": {}
  },
  "completion_service": {
    "llm_service": "vertexai",
    "llm_model": "text-bison",
    "model_kwargs": {
      "temperature": 0
    },
  "prompt_path": "./app/prompts/gcp_vertexai_palm/"
  }
}
![copy icon](https://docs.tigergraph.com/_/img/octicons-16.svg#view-clippy)Copied!

```



In addition to the `AZURE_OPENAI_ENDPOINT`, `AZURE_OPENAI_API_KEY`, and `azure_deployment`, the `llm_model` and `model_name` can be edited to match your specific configuration details.
```
{
  "model_name": "GPT35Turbo",
  "embedding_service": {
    "embedding_model_service": "azure",
    "azure_deployment":"YOUR_EMBEDDING_DEPLOYMENT_HERE",
    "authentication_configuration": {
      "OPENAI_API_TYPE": "azure",
      "OPENAI_API_VERSION": "2022-12-01",
      "AZURE_OPENAI_ENDPOINT": "YOUR_AZURE_ENDPOINT_HERE",
      "AZURE_OPENAI_API_KEY": "YOUR_AZURE_API_KEY_HERE"
    }
  },
  "completion_service": {
    "llm_service": "azure",
    "azure_deployment": "YOUR_COMPLETION_DEPLOYMENT_HERE",
    "openai_api_version": "2023-07-01-preview",
    "llm_model": "gpt-35-turbo-instruct",
    "authentication_configuration": {
      "OPENAI_API_TYPE": "azure",
      "AZURE_OPENAI_ENDPOINT": "YOUR_AZURE_ENDPOINT_HERE",
      "AZURE_OPENAI_API_KEY": "YOUR_AZURE_API_KEY_HERE"
    },
    "model_kwargs": {
      "temperature": 0
    },
    "prompt_path": "./app/prompts/azure_open_ai_gpt35_turbo_instruct/"
  }
}
![copy icon](https://docs.tigergraph.com/_/img/octicons-16.svg#view-clippy)Copied!

```

Specify, your configuration details in the sample file below:
```
{
  "model_name": "Claude-3-haiku",
  "embedding_service": {
    "embedding_model_service": "bedrock",
    "embedding_model":"amazon.titan-embed-text-v1",
    "authentication_configuration": {
      "AWS_ACCESS_KEY_ID": "ACCESS_KEY",
      "AWS_SECRET_ACCESS_KEY": "SECRET"
    }
  },
  "completion_service": {
    "llm_service": "bedrock",
    "llm_model": "anthropic.claude-3-haiku-20240307-v1:0",
    "authentication_configuration": {
      "AWS_ACCESS_KEY_ID": "ACCESS_KEY",
      "AWS_SECRET_ACCESS_KEY": "SECRET"
    },
    "model_kwargs": {
      "temperature": 0,
    },
    "prompt_path": "./app/prompts/aws_bedrock_claude3haiku/"
  }
}
![copy icon](https://docs.tigergraph.com/_/img/octicons-16.svg#view-clippy)Copied!

```

Example configuration for a model from Ollama is shown below. Please specify your configuration details:
```
{
  "model_name": "GPT-4",
  "embedding_service": {
    "embedding_model_service": "openai",
    "authentication_configuration": {
      "OPENAI_API_KEY": ""
    }
  },
  "completion_service": {
    "llm_service": "ollama",
    "llm_model": "calebfahlgren/natural-functions",
    "model_kwargs": {
      "temperature": 0.0000001
    },
    "prompt_path": "./app/prompts/openai_gpt4/"
  }
}
![copy icon](https://docs.tigergraph.com/_/img/octicons-16.svg#view-clippy)Copied!

```

Example configuration for a model on Hugging Face with a dedicated endpoint is shown below. Please specify your configuration details:
```
{
  "model_name": "llama3-8b",
  "embedding_service": {
    "embedding_model_service": "openai",
    "authentication_configuration": {
      "OPENAI_API_KEY": ""
    }
  },
  "completion_service": {
    "llm_service": "huggingface",
    "llm_model": "hermes-2-pro-llama-3-8b-lpt",
    "endpoint_url": "https:endpoints.huggingface.cloud",
    "authentication_configuration": {
      "HUGGINGFACEHUB_API_TOKEN": ""
    },
    "model_kwargs": {
      "temperature": 0.1
    },
    "prompt_path": "./app/prompts/openai_gpt4/"
  }
}
![copy icon](https://docs.tigergraph.com/_/img/octicons-16.svg#view-clippy)Copied!

```

Example configuration for a model on Hugging Face with a serverless endpoint is shown below. Please specify your configuration details:
```
{
  "model_name": "Llama3-70b",
  "embedding_service": {
    "embedding_model_service": "openai",
    "authentication_configuration": {
      "OPENAI_API_KEY": ""
    }
  },
  "completion_service": {
    "llm_service": "huggingface",
    "llm_model": "meta-llama/Meta-Llama-3-70B-Instruct",
    "authentication_configuration": {
      "HUGGINGFACEHUB_API_TOKEN": ""
    },
    "model_kwargs": {
      "temperature": 0.1
    },
    "prompt_path": "./app/prompts/llama_70b/"
  }
}
![copy icon](https://docs.tigergraph.com/_/img/octicons-16.svg#view-clippy)Copied!

```

Example configuration for a model from Groq is shown below. Please specify your configuration details:
```
{
  "model_name": "mixtral-8x7b-32768",
  "embedding_service": {
    "embedding_model_service": "openai",
    "authentication_configuration": {
      "OPENAI_API_KEY": ""
    }
  },
  "completion_service": {
    "llm_service": "groq",
    "llm_model": "mixtral-8x7b-32768",
    "authentication_configuration": {
      "GROQ_API_KEY": ""
    },
    "model_kwargs": {
      "temperature": 0.1
    },
    "prompt_path": "./app/prompts/openai_gpt4/"
  }
}
![copy icon](https://docs.tigergraph.com/_/img/octicons-16.svg#view-clippy)Copied!

```

### [](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed#_milvus_configuration)Milvus Configuration
Milvus is CoPilot’s vector database. Copy the below into `configs/milvus_config.json` and edit the `host` and `port` fields to match your Milvus configuration. If running the Docker Compose file as is, you don’t need to change anything. The `host` address in the template is used by the Docker Compose file.
  * `username` and `password` can also be configured below if required by your Milvus setup.
  * `enabled` should always be `"true"` for now as Milvus is the only embedding store supported.


```
{
  "host": "milvus-standalone",
  "port": 19541,
  "username": "",
  "password": "",
  "enabled": "true",
  "sync_interval_seconds": 60
}
![copy icon](https://docs.tigergraph.com/_/img/octicons-16.svg#view-clippy)Copied!

```

### [](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed#_chat_history_configuration)Chat History Configuration
Copy the below code into `configs/chat_config.json``. You shouldn’t need to change anything unless you change the port of the chat history service in the Docker Compose file.
```
{
  "apiPort":"8002",
  "dbPath": "chats.db",
  "dbLogPath": "db.log",
  "logPath": "requestLogs.jsonl",
  ​​"conversationAccessRoles": ["superuser", "globaldesigner"]
}
![copy icon](https://docs.tigergraph.com/_/img/octicons-16.svg#view-clippy)Copied!

```

## [](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed#_3_optional_logging)3) (Optional) Logging
Users can also configure logging in TigerGraph CoPilot service.
### [](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed#_create_log_configuration_file)Create log configuration file
Copy the below into `configs/log_config.json` and edit the appropriate values to suit your needs.
```
{
  "log_file_path": "logs",
  "log_max_size": 10485760,
  "log_backup_count": 10
}
![copy icon](https://docs.tigergraph.com/_/img/octicons-16.svg#view-clippy)Copied!

```

The log is rotated and the rotation is based on the size and backups. These configurations are applied in the `LogWriter` to the standard Python logging package.
Operational and audit logs are recorded.
Outputs include:
  * `log.ERROR`
  * `log.INFO`
  * and `log.AUDIT-COPILOT`


### [](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed#_configure_logging_level_in_dockerfile)Configure Logging Level in Dockerfile
To configure the logging level of the service, edit the Docker Compose file.
By default, the logging level is set to "INFO".
```
ENV LOGLEVEL="INFO"
![copy icon](https://docs.tigergraph.com/_/img/octicons-16.svg#view-clippy)Copied!

```

This line can be changed to support different logging levels.
Table 1. The levels are described below: Level | Description  
---|---  
`CRITICAL` | A serious error.  
`ERROR` | Failing to perform functions.  
`WARNING` | Indication of unexpected problems, e.g. failure to map a user’s question to the graph schema.  
`INFO` | Confirming that the service is performing as expected.  
`DEBUG` | Detailed information, e.g. the functions retrieved during the `GenerateFunction` step, etc.  
`DEBUG_PII` | Finer-grained information that could potentially include `PII`, such as a user’s question, the complete function call (with parameters), and the LLM’s natural language response.  
NOTSET | All messages are processed.  
## [](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed#_4_start_copilot)4) Start CoPilot
Now, simply run `docker compose up -d` and wait for all the services to start. If you don’t want to use the included Milvus DB, you can set its scale to 0 to not start it: `docker compose up -d --scale milvus-standalone=0 --scale etcd=0 --scale minio=0`.
## [](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed#_5_install_udfs)5) Install UDFs
This step is not needed for TigerGraph databases version 4.x. For TigerGraph 3.x, we need to install a few user defined functions (UDFs) for CoPilot to work.
  1. On the machine that hosts the TigerGraph database, switch to the user of TigerGraph: `sudo su - tigergraph`. If TigerGraph is running on a cluster, you can do this on any one of the machines.
  2. Download the two files [tg_ExprFunctions.hpp](https://raw.githubusercontent.com/tigergraph/gsql-graph-algorithms/tg_4.1.0_dev/UDF/tg_ExprFunctions.hpp) and [tg_ExprUtil.hpp](https://raw.githubusercontent.com/tigergraph/gsql-graph-algorithms/tg_4.1.0_dev/UDF/tg_ExprUtil.hpp) and save them for later.
  3. In a terminal, run the following command to enable UDF installation:
```
gadmin config set GSQL.UDF.EnablePutTgExpr true
gadmin config set GSQL.UDF.Policy.Enable false
gadmin config apply
gadmin restart GSQL
![copy icon](https://docs.tigergraph.com/_/img/octicons-16.svg#view-clippy)Copied!

```

  4. Enter a GSQL shell, and run the following command to get the current UDF files.
```
GET ExprFunctions TO "./tg_ExprFunctions_current.hpp"
GET ExprUtil TO "./tg_ExprUtil_current.hpp"
![copy icon](https://docs.tigergraph.com/_/img/octicons-16.svg#view-clippy)Copied!

```

  5. Examine the files you just downloaded to see if they contain any custom UDFs authored by you or someone else in your organization (that is, something other than the example UDFs provided by TigerGraph). If they do, then copy those UDFs into the CoPilot UDF files downloaded in the earlier step, so that the CoPilot UDF files now contain both the currently installed UDFs and the CoPilot UDFs.
  6. In the GSQL shell, run the following command to install the CoPilot UDF files.
```
PUT ExprFunctions FROM "./tg_ExprFunctions.hpp"
PUT ExprUtil FROM "./tg_ExprUtil.hpp"
![copy icon](https://docs.tigergraph.com/_/img/octicons-16.svg#view-clippy)Copied!

```

  7. Quit the GSQL shell, and run the following command in the terminal to disable UDF installation for security purpose.
```
gadmin config set GSQL.UDF.EnablePutTgExpr false
gadmin config set GSQL.UDF.Policy.Enable true
gadmin config apply
gadmin restart GSQL
![copy icon](https://docs.tigergraph.com/_/img/octicons-16.svg#view-clippy)Copied!

```



## [](https://docs.tigergraph.com/tg-copilot/getstarted/self-managed#_next_steps)Next Steps
Once, that is running now you can move on to the five ways to [Use TigerGraph Co-Pilot](https://docs.tigergraph.com/tg-copilot/using-copilot/).
Return to [TigerGraph CoPilot](https://docs.tigergraph.com/tg-copilot/intro/) for a different topic.
3 Twin Dolphin Drive, Ste 225 Redwood City, CA 94065 
Copyright © 2025 TigerGraph
  * ## Resources
    * [Support](https://www.tigergraph.com/support/)
    * [Community](https://community.tigergraph.com/)
    * [Developer Site](https://dev.tigergraph.com/)
    * [Test Drive](https://testdrive.tigergraph.com/)
  * ## Social
    * [Linkedin](https://www.linkedin.com/company/tigergraph/)
    * [Facebook](https://www.facebook.com/TigerGraphDB/)
    * [Twitter](https://twitter.com/tigergraphdb)
  * ## Legal
    * [Privacy Policy](https://www.tigergraph.com/privacy-policy/)
    * [Terms of Use](https://www.tigergraph.com/terms/)
    * [Sitemap](https://docs.tigergraph.com/sitemap.xml)


