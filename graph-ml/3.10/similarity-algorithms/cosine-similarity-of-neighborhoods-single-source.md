![TigerGraph Logo](https://www.tigergraph.com/wp-content/uploads/2020/05/TG_LOGO.svg) [Docs](https://docs.tigergraph.com/home)
Page 1[Prev](https://docs.tigergraph.com/graph-ml/3.10/similarity-algorithms/cosine-similarity-of-neighborhoods-single-source)[Next](https://docs.tigergraph.com/graph-ml/3.10/similarity-algorithms/cosine-similarity-of-neighborhoods-single-source)
Search by [Algolia](https://www.algolia.com/docsearch)
[Products](https://docs.tigergraph.com/graph-ml/3.10/similarity-algorithms/cosine-similarity-of-neighborhoods-single-source)
TigerGraph Savanna
[TigerGraph Savanna](https://docs.tigergraph.com/savanna/main/overview/) [(_TigerGraph Cloud Classic_)](https://docs.tigergraph.com/cloud/main/start/overview)
TigerGraph Server
[TigerGraph DB](https://docs.tigergraph.com/tigergraph-server/4.2/intro/)
TigerGraph Suite
[GraphStudio and Admin Portal](https://docs.tigergraph.com/gui/4.2/intro/) [Insights](https://docs.tigergraph.com/insights/4.2/intro/) [GSQL Web Shell](https://docs.tigergraph.com/tigergraph-server/current/gsql-shell/web)
Query Languages
[GSQL Language Reference](https://docs.tigergraph.com/gsql-ref/4.2/intro/) [GSQL Web Shell](https://docs.tigergraph.com/tigergraph-server/current/gsql-shell/web) [OpenCypher](https://docs.tigergraph.com/gsql-ref/current/opencypher-in-gsql)
AI & Graph Intelligence
[Graph Data Science Library](https://docs.tigergraph.com/graph-ml/3.10/intro/) [Hybrid Graph+Vector Search](https://docs.tigergraph.com/gsql-ref/current/vector/)
Connectors and APIs
[Data Connectors](https://docs.tigergraph.com/tigergraph-server/current/data-loading) [pyTigerGraph](https://docs.tigergraph.com/pytigergraph/1.8/intro/) [TigerGraph GraphQL Service](https://docs.tigergraph.com/graphql/3.9/) [JDBC Driver](https://github.com/tigergraph/ecosys/tree/master/tools/etl/tg-jdbc-driver)
Legacy Documentation
[ Legacy Documentation ](https://docs-legacy.tigergraph.com)
[Resources](https://docs.tigergraph.com/graph-ml/3.10/similarity-algorithms/cosine-similarity-of-neighborhoods-single-source)
[Developer Site](https://dev.tigergraph.com/) [Community Forum](https://community.tigergraph.com/) [Knowledge Base](https://tigergraph.freshdesk.com/support/solutions)
[Download](https://dl.tigergraph.com)
[ TG Savanna](https://savanna.tgcloud.io)
### [Graph Data Science Library](https://docs.tigergraph.com/graph-ml/3.10/intro/)
  *     * [Overview](https://docs.tigergraph.com/graph-ml/3.10/intro/)
      * [Library Structure](https://docs.tigergraph.com/graph-ml/3.10/intro/library-structure)
      * [Table: Algorithm Availability and Dependencies](https://docs.tigergraph.com/graph-ml/3.10/intro/algorithm-table)
  *     * [Using an Algorithm](https://docs.tigergraph.com/graph-ml/3.10/using-an-algorithm/)
      * [Packaged Template Algorithms](https://docs.tigergraph.com/graph-ml/3.10/using-an-algorithm/packaged-template-algorithms)
      * [Algorithms as GSQL Queries](https://docs.tigergraph.com/graph-ml/3.10/using-an-algorithm/algorithms-as-gsql-queries)
  *     * [Centrality Algorithms](https://docs.tigergraph.com/graph-ml/3.10/centrality-algorithms/)
      * [Approximate Closeness Centrality](https://docs.tigergraph.com/graph-ml/3.10/centrality-algorithms/approximate-closeness-centrality)
      * [ArticleRank](https://docs.tigergraph.com/graph-ml/3.10/centrality-algorithms/article-rank)
      * [Betweenness Centrality](https://docs.tigergraph.com/graph-ml/3.10/centrality-algorithms/betweenness-centrality)
      * [Closeness Centrality](https://docs.tigergraph.com/graph-ml/3.10/centrality-algorithms/closeness-centrality)
      * [Degree Centrality](https://docs.tigergraph.com/graph-ml/3.10/centrality-algorithms/degree-centrality)
      * [Eigenvector Centrality](https://docs.tigergraph.com/graph-ml/3.10/centrality-algorithms/eigenvector-centrality)
      * [Harmonic Centrality](https://docs.tigergraph.com/graph-ml/3.10/centrality-algorithms/harmonic-centrality)
      * [Influence Maximization](https://docs.tigergraph.com/graph-ml/3.10/centrality-algorithms/influence-maximization)
      * [PageRank](https://docs.tigergraph.com/graph-ml/3.10/centrality-algorithms/pagerank)
      * [Personalized PageRank](https://docs.tigergraph.com/graph-ml/3.10/centrality-algorithms/personalized-pagerank)
      * [Weighted Degree Centrality](https://docs.tigergraph.com/graph-ml/3.10/centrality-algorithms/weighted-degree-centrality)
      * [Weighted PageRank](https://docs.tigergraph.com/graph-ml/3.10/centrality-algorithms/weighted-pagerank)
  *     * [Classification Algorithms](https://docs.tigergraph.com/graph-ml/3.10/classification-algorithms/)
      * [Greedy Graph Coloring](https://docs.tigergraph.com/graph-ml/3.10/classification-algorithms/greedy-graph-coloring)
      * [k-Nearest Neighbors](https://docs.tigergraph.com/graph-ml/3.10/classification-algorithms/k-nearest-neighbors)
      * [k-Nearest Neighbors (Batch Version)](https://docs.tigergraph.com/graph-ml/3.10/classification-algorithms/k-nearest-neighbors-batch)
      * [k-Nearest Neighbors (Cross-Validation Version)](https://docs.tigergraph.com/graph-ml/3.10/classification-algorithms/k-nearest-neighbors-cross-validation)
      * [Maximal Independent Set](https://docs.tigergraph.com/graph-ml/3.10/classification-algorithms/maximal-independent-set)
      * [Weisfeiler-Lehman Isomorphism](https://docs.tigergraph.com/graph-ml/3.10/classification-algorithms/weisfeiler-lehman)
  *     * [Community Algorithms](https://docs.tigergraph.com/graph-ml/3.10/community-algorithms/)
      * [Weakly Connected Components](https://docs.tigergraph.com/graph-ml/3.10/community-algorithms/connected-components)
        * [WCC (Small-World Optimized)](https://docs.tigergraph.com/graph-ml/3.10/community-algorithms/wcc-small-world)
      * [k-Core Decomposition](https://docs.tigergraph.com/graph-ml/3.10/community-algorithms/k-core-decomposition)
      * [k-Means Clustering](https://docs.tigergraph.com/graph-ml/3.10/community-algorithms/k-means-clustering)
      * [Label Propagation](https://docs.tigergraph.com/graph-ml/3.10/community-algorithms/label-propagation)
      * [Speaker-Listener Label Propagation](https://docs.tigergraph.com/graph-ml/3.10/community-algorithms/slpa)
      * [Local Clustering Coefficient](https://docs.tigergraph.com/graph-ml/3.10/community-algorithms/local-clustering-coefficient)
      * [Louvain](https://docs.tigergraph.com/graph-ml/3.10/community-algorithms/louvain)
      * [Strongly Connected Components](https://docs.tigergraph.com/graph-ml/3.10/community-algorithms/strongly-connected-components)
        * [SCC (Small-World Optimized)](https://docs.tigergraph.com/graph-ml/3.10/community-algorithms/scc-small-world)
      * [Triangle Counting](https://docs.tigergraph.com/graph-ml/3.10/community-algorithms/triangle-counting)
  *     * [Node Embedding Algorithms](https://docs.tigergraph.com/graph-ml/3.10/node-embeddings/)
      * [Fast Random Projection](https://docs.tigergraph.com/graph-ml/3.10/node-embeddings/fast-random-projection)
      * [NodePiece Models](https://docs.tigergraph.com/pytigergraph/1.8/gds/nodepiece)
  *     * [Pathfinding Algorithms](https://docs.tigergraph.com/graph-ml/3.10/pathfinding-algorithms/)
      * [A*](https://docs.tigergraph.com/graph-ml/3.10/pathfinding-algorithms/a-star)
      * [All-Pairs Shortest Path](https://docs.tigergraph.com/graph-ml/3.10/pathfinding-algorithms/all-pairs-shortest-path)
      * [All Paths (Single-Pair)](https://docs.tigergraph.com/graph-ml/3.10/pathfinding-algorithms/single-pair-all-paths)
      * [Breadth-First Search](https://docs.tigergraph.com/graph-ml/3.10/pathfinding-algorithms/bfs)
      * [Cycle Detection](https://docs.tigergraph.com/graph-ml/3.10/pathfinding-algorithms/cycle-detection)
      * [Cycle Component](https://docs.tigergraph.com/graph-ml/3.10/pathfinding-algorithms/cycle-component)
      * [Estimated Diameter](https://docs.tigergraph.com/graph-ml/3.10/pathfinding-algorithms/estimated-diameter)
      * [Maximum Flow](https://docs.tigergraph.com/graph-ml/3.10/pathfinding-algorithms/max-flow)
      * [Minimum Spanning Forest](https://docs.tigergraph.com/graph-ml/3.10/pathfinding-algorithms/minimum-spanning-forest)
      * [Minimum Spanning Tree](https://docs.tigergraph.com/graph-ml/3.10/pathfinding-algorithms/minimum-spanning-tree)
      * [Single-source Shortest Path (Unweighted)](https://docs.tigergraph.com/graph-ml/3.10/pathfinding-algorithms/single-source-shortest-path-unweighted)
      * [Single-source Shortest Path (Weighted)](https://docs.tigergraph.com/graph-ml/3.10/pathfinding-algorithms/single-source-shortest-path-weighted)
  *     * [Similarity Algorithms](https://docs.tigergraph.com/graph-ml/3.10/similarity-algorithms/)
      * [Cosine Similarity of Neighborhoods (All Pairs, Batch)](https://docs.tigergraph.com/graph-ml/3.10/similarity-algorithms/cosine-similarity-of-neighborhoods-batch)
      * [Cosine Similarity of Neighborhoods (Single-Source)](https://docs.tigergraph.com/graph-ml/3.10/similarity-algorithms/cosine-similarity-of-neighborhoods-single-source)
      * [Jaccard Similarity of Neighborhoods (All Pairs, Batch)](https://docs.tigergraph.com/graph-ml/3.10/similarity-algorithms/jaccard-similarity-of-neighborhoods-batch)
      * [Jaccard Similarity of Neighborhoods (Single Source)](https://docs.tigergraph.com/graph-ml/3.10/similarity-algorithms/jaccard-similarity-of-neighborhoods-single-source)
      * [Vector Functions](https://docs.tigergraph.com/gsql-ref/4.2/querying/func/vector-functions)
  *     * [Topological Link Prediction Algorithms](https://docs.tigergraph.com/graph-ml/3.10/link-prediction/)
      * [Adamic Adar](https://docs.tigergraph.com/graph-ml/3.10/link-prediction/adamic-adar)
      * [Common Neighbors](https://docs.tigergraph.com/graph-ml/3.10/link-prediction/common-neighbors)
      * [Preferential Attachment](https://docs.tigergraph.com/graph-ml/3.10/link-prediction/preferential-attachment)
      * [Resource Allocation](https://docs.tigergraph.com/graph-ml/3.10/link-prediction/resource-allocation)
      * [Same Community](https://docs.tigergraph.com/graph-ml/3.10/link-prediction/same-community)
      * [Total Neighbors](https://docs.tigergraph.com/graph-ml/3.10/link-prediction/total-neighbors)
    * [Legacy Version Documentation](https://docs.tigergraph.com/graph-ml/3.10/release-notes/legacy-tg-versions)


Graph Data Science Library 3.10
[Fully-Managed: Savanna](https://docs.tigergraph.com/savanna/main/overview/)
[Self-Managed: TigerGraph DB](https://docs.tigergraph.com/tigergraph-server/4.2/intro/)
[Install](https://docs.tigergraph.com/tigergraph-server/current/getting-started/) [Manage](https://docs.tigergraph.com/tigergraph-server/current/system-management/)
Tutorials & Guides
[GSQL](https://github.com/tigergraph/ecosys/blob/master/tutorials/GSQL.md) [OpenCypher in GSQL](https://github.com/tigergraph/ecosys/blob/master/tutorials/Cypher.md) [Hybrid Vector Search](https://github.com/tigergraph/ecosys/blob/master/tutorials/VectorSearch.md)
Reference Manuals
[GSQL](https://docs.tigergraph.com/gsql-ref/4.2/intro/) [OpenCypher](https://docs.tigergraph.com/gsql-ref/current/opencypher-in-gsql/) [Vector](https://docs.tigergraph.com/gsql-ref/current/vector/) [REST APIs](https://docs.tigergraph.com/tigergraph-server/current/api/) [Configuration Parameters](https://docs.tigergraph.com/tigergraph-server/current/reference/configuration-parameters)
Visual Tools
[Develop: GraphStudio](https://docs.tigergraph.com/gui/4.2/intro/) [Administer: Admin Portal](https://docs.tigergraph.com/gui/4.2/intro/) [Visualize: Insights](https://docs.tigergraph.com/insights/4.2/intro/)
AI & Data Science
[Graph Algorithms](https://docs.tigergraph.com/graph-ml/3.10/intro/) [pyTigerGraph](https://docs.tigergraph.com/pytigergraph/1.8/intro/) [TigerGraphX](https://github.com/tigergraph/ecosys/blob/master/tutorials/TigerGraphX.md) [ML Workbench](https://docs.tigergraph.com/ml-workbench/1.4/intro/) [CoPilot](https://docs.tigergraph.com/tg-copilot/intro/)
  * [TigerGraph DB](https://docs.tigergraph.com/tigergraph-server/4.2/intro/)
    * [4.2 Pre](https://docs.tigergraph.com/tigergraph-server/4.2/intro/)
    * [4.1](https://docs.tigergraph.com/tigergraph-server/4.1/intro/)
    * [3.11](https://docs.tigergraph.com/tigergraph-server/3.11/intro/)
    * [3.10](https://docs.tigergraph.com/tigergraph-server/3.10/intro/)
    * [3.9](https://docs.tigergraph.com/tigergraph-server/3.9/intro/)
    * [3.6](https://docs.tigergraph.com/tigergraph-server/3.6/intro/)
  * [GSQL Language Reference](https://docs.tigergraph.com/gsql-ref/4.2/intro/)
    * [4.2 Pre](https://docs.tigergraph.com/gsql-ref/4.2/intro/)
    * [4.1](https://docs.tigergraph.com/gsql-ref/4.1/intro/)
    * [3.11](https://docs.tigergraph.com/gsql-ref/3.11/intro/)
    * [3.10](https://docs.tigergraph.com/gsql-ref/3.10/intro/)
    * [3.9](https://docs.tigergraph.com/gsql-ref/3.9/intro/)
    * [3.6](https://docs.tigergraph.com/gsql-ref/3.6/intro/intro)
  * [TigerGraph Savanna](https://docs.tigergraph.com/savanna/main/overview/)
  * [GraphStudio and Admin Portal](https://docs.tigergraph.com/gui/4.2/intro/)
    * [4.2 Pre](https://docs.tigergraph.com/gui/4.2/intro/)
    * [4.1](https://docs.tigergraph.com/gui/4.1/intro/)
    * [3.11](https://docs.tigergraph.com/gui/3.11/intro/)
    * [3.10](https://docs.tigergraph.com/gui/3.10/intro/)
    * [3.9](https://docs.tigergraph.com/gui/3.9/intro/)
    * [3.6](https://docs.tigergraph.com/gui/3.6/graphstudio/overview)
  * [Insights](https://docs.tigergraph.com/insights/4.2/intro/)
    * [4.2 Pre](https://docs.tigergraph.com/insights/4.2/intro/)
    * [4.1](https://docs.tigergraph.com/insights/4.1/intro/)
    * [3.11](https://docs.tigergraph.com/insights/3.11/intro/)
    * [3.10](https://docs.tigergraph.com/insights/3.10/intro/)
    * [3.9](https://docs.tigergraph.com/insights/3.9/intro/)
  * [Graph Data Science Library](https://docs.tigergraph.com/graph-ml/3.10/intro/)
    * [3.10](https://docs.tigergraph.com/graph-ml/3.10/intro/)
  * [pyTigerGraph](https://docs.tigergraph.com/pytigergraph/1.8/intro/)
    * [1.8](https://docs.tigergraph.com/pytigergraph/1.8/intro/)
    * [1.7](https://docs.tigergraph.com/pytigergraph/1.7/intro/)
    * [1.6](https://docs.tigergraph.com/pytigergraph/1.6/intro/)
  * [TigerGraph ML Workbench](https://docs.tigergraph.com/ml-workbench/1.4/intro/)
    * [1.4](https://docs.tigergraph.com/ml-workbench/1.4/intro/)
  * [TigerGraph GraphQL Service](https://docs.tigergraph.com/graphql/3.9/)
    * [3.9](https://docs.tigergraph.com/graphql/3.9/)
  * [TigerGraph CoPilot](https://docs.tigergraph.com/tg-copilot/intro/)
    * [main](https://docs.tigergraph.com/tg-copilot/intro/)
  * [TigerGraph Cloud Classic](https://docs.tigergraph.com/cloud/main/start/overview)


[](https://docs.tigergraph.com/home/)
  * [Graph Data Science Library 3.10](https://docs.tigergraph.com/graph-ml/3.10/intro/)
  * [Similarity Algorithms](https://docs.tigergraph.com/graph-ml/3.10/similarity-algorithms/)
  * [Cosine Similarity of Neighborhoods (Single-Source)](https://docs.tigergraph.com/graph-ml/3.10/similarity-algorithms/cosine-similarity-of-neighborhoods-single-source)


[Edit this Page](https://github.com/tigergraph/tigdsl-docs/edit/3.10/modules/similarity-algorithms/pages/cosine-similarity-of-neighborhoods-single-source.adoc)
### Contents
  * [Specifications](https://docs.tigergraph.com/graph-ml/3.10/similarity-algorithms/cosine-similarity-of-neighborhoods-single-source#_specifications)
  * [Parameters](https://docs.tigergraph.com/graph-ml/3.10/similarity-algorithms/cosine-similarity-of-neighborhoods-single-source#_parameters)
  * [Output](https://docs.tigergraph.com/graph-ml/3.10/similarity-algorithms/cosine-similarity-of-neighborhoods-single-source#_output)
  * [Result size](https://docs.tigergraph.com/graph-ml/3.10/similarity-algorithms/cosine-similarity-of-neighborhoods-single-source#_result_size)
  * [Time complexity](https://docs.tigergraph.com/graph-ml/3.10/similarity-algorithms/cosine-similarity-of-neighborhoods-single-source#_time_complexity)
  * [Example](https://docs.tigergraph.com/graph-ml/3.10/similarity-algorithms/cosine-similarity-of-neighborhoods-single-source#_example)


# Cosine Similarity of Neighborhoods (Single-Source)
### Contents
  * [Specifications](https://docs.tigergraph.com/graph-ml/3.10/similarity-algorithms/cosine-similarity-of-neighborhoods-single-source#_specifications)
  * [Parameters](https://docs.tigergraph.com/graph-ml/3.10/similarity-algorithms/cosine-similarity-of-neighborhoods-single-source#_parameters)
  * [Output](https://docs.tigergraph.com/graph-ml/3.10/similarity-algorithms/cosine-similarity-of-neighborhoods-single-source#_output)
  * [Result size](https://docs.tigergraph.com/graph-ml/3.10/similarity-algorithms/cosine-similarity-of-neighborhoods-single-source#_result_size)
  * [Time complexity](https://docs.tigergraph.com/graph-ml/3.10/similarity-algorithms/cosine-similarity-of-neighborhoods-single-source#_time_complexity)
  * [Example](https://docs.tigergraph.com/graph-ml/3.10/similarity-algorithms/cosine-similarity-of-neighborhoods-single-source#_example)


Supported Graph Characteristics
Weighted edges  
---  
Homogeneous vertex types  
Heterogeneous vertex types  
Algorithm link: [Cosine Similarity of Neighborhoods (Single-Source)](https://github.com/tigergraph/gsql-graph-algorithms/tree/master/algorithms/Similarity/cosine/single_source)
This algorithm calculates the similarity between a given vertex and every other vertex in the graph using [cosine similarity](https://en.wikipedia.org/wiki/Cosine_similarity).
For each vertex pair, the selected properties of each vertex are first represented as a vector. For example, a property vector for a Person vertex could have the elements `age`, `height`, and `weight`. Then the cosine function is applied to the two vectors.
The cosine similarity of two vectors A and B is defined as follows:
cos(A,B)=A⋅B||A||⋅||B||=∑iAiBi√∑iA2i√∑iB2i
If A and B are identical, then cos(A,B)=1. As expected for a cosine function, the value can also be negative or zero. In fact, cosine similarity is closely related to the Pearson correlation coefficient.
For this implementation of the algorithm, the feature vector is the set of edge weights between the two vertices and their neighbors.
On a graph with many vertices, it is very likely that most vertices will be dissimilar to each other. For this reason, we can limit output with the `top_k` parameter.
In the Movie Rating graph shown in the figure below, there are Person vertices and Movie vertices. Every person has given a rating to one or more movies. The rating score is stored on the Likes edge using the weight attribute (not shown in the diagram). For example, in the graph below, Alex gives a rating of 10 to the movie "Free Solo".
![View of a graph illustrating Person vertices connected to Movie vertices by Likes edges.](https://docs.tigergraph.com/graph-ml/3.10/similarity-algorithms/_images/movie-graph.png)
## [](https://docs.tigergraph.com/graph-ml/3.10/similarity-algorithms/cosine-similarity-of-neighborhoods-single-source#_specifications)Specifications
```
tg_cosine_nbor_ss (VERTEX source, SET<STRING> e_type_set, SET<STRING> reverse_e_type_set,
 STRING weight_attribute, INT top_k, INT print_limit, BOOL print_results = TRUE,
 STRING file_path = "", STRING similarity_edge = "")
RETURNS (MapAccum<VERTEX, FLOAT>)
gsql![copy icon](https://docs.tigergraph.com/_/img/octicons-16.svg#view-clippy)Copied!

```

### [](https://docs.tigergraph.com/graph-ml/3.10/similarity-algorithms/cosine-similarity-of-neighborhoods-single-source#_parameters)Parameters
Parameter | Description | Default value  
---|---|---  
`VERTEX source` | The source vertex to start from. Provide the vertex ID and type as a tuple: `("id","type")` | N/A  
`SET<STRING> e_type_set` | Edge types to traverse | (empty set of strings)  
`SET<STRING> reverse_e_type_set` | Reverse edge type to traverse | (empty set of strings)  
`STRING weight_attribute` | The edge attribute to use as the weight of the edge. | (empty string)  
`INT top_k` | The number of vertices to return | 10  
`INT print_limit` | The maximum number of vertices to return | 10  
`BOOL print_results` | Whether to output the final results to the console in JSON format | True  
`STRING filepath` | If provided, the algorithm will save the output in CSV format to this file | (empty string)  
`STRING similarity_edge` | If provided, the similarity score will be saved to this edge | (empty string)  
### [](https://docs.tigergraph.com/graph-ml/3.10/similarity-algorithms/cosine-similarity-of-neighborhoods-single-source#_output)Output
The top k vertices in the graph that have the highest similarity scores, along with their scores.
The result is available in three forms:
  * streamed out in JSON format
  * written to a file in tabular format
  * stored as a vertex attribute value


### [](https://docs.tigergraph.com/graph-ml/3.10/similarity-algorithms/cosine-similarity-of-neighborhoods-single-source#_result_size)Result size
The output size is almost always k, except in cases where the number of total vertices is lower than k. The algorithm may arbitrarily choose to output one vertex over another if there are tied similarity scores.
### [](https://docs.tigergraph.com/graph-ml/3.10/similarity-algorithms/cosine-similarity-of-neighborhoods-single-source#_time_complexity)Time complexity
This algorithm has a time complexity of O(D2), where D is equal to the outdegree of the vertex.
## [](https://docs.tigergraph.com/graph-ml/3.10/similarity-algorithms/cosine-similarity-of-neighborhoods-single-source#_example)Example
Still using a Movie Rating graph, one way to calculate similarity between two people would be to see which movies they both rated similarly.
Starting from one person’s name, this algorithm calculates the cosine similarity between the given person and every other person in the graph, as long as there is at least one movie they have both rated.
```
tg_cosine_nbor_ss ("Alex", "Likes", "Reverse_Likes", "weight", 5, 5,_,_,_)
gsql![copy icon](https://docs.tigergraph.com/_/img/octicons-16.svg#view-clippy)Copied!

```

If the source vertex is Alex, and `top_k` is set to 5, then we calculate the cosine similarity between him and two other persons, Jing and Kevin (since our graph does not have enough data to return 5 Person vertices). The JSON output shows the most similar vertices and their similarity scores in descending order.
The output limit is 5 persons, but we have only 2 qualified persons:
```
[
 {
  "neighbours": [
   {
    "attributes": {
     "neighbours.@sum_similarity": 0.42173
    },
    "v_id": "Jing",
    "v_type": "Person"
   },
   {
    "attributes": {
     "neighbours.@sum_similarity": 0.14248
    },
    "v_id": "Kevin",
    "v_type": "Person"
   }
  ]
 }
]
json![copy icon](https://docs.tigergraph.com/_/img/octicons-16.svg#view-clippy)Copied!

```

The CSV file version output, if selected, is not necessarily in descending order. It looks like the following:
```
Vertex1,Vertex2,Similarity
Alex,Kevin,0.142484
Alex,Jing,0.421731
text![copy icon](https://docs.tigergraph.com/_/img/octicons-16.svg#view-clippy)Copied!

```

The ATTR version inserts a new edge called Similarity into the graph with the similarity score as an edge attribute whenever the score is larger than zero. The result looks like this:
![screen shot 2019 02 13 at 5.18.03 pm](https://docs.tigergraph.com/graph-ml/3.10/similarity-algorithms/_images/screen-shot-2019-02-13-at-5.18.03-pm.png)
3 Twin Dolphin Drive, Ste 225 Redwood City, CA 94065 
Copyright © 2025 TigerGraph
  * ## Resources
    * [Support](https://www.tigergraph.com/support/)
    * [Community](https://community.tigergraph.com/)
    * [Developer Site](https://dev.tigergraph.com/)
    * [Test Drive](https://testdrive.tigergraph.com/)
  * ## Social
    * [Linkedin](https://www.linkedin.com/company/tigergraph/)
    * [Facebook](https://www.facebook.com/TigerGraphDB/)
    * [Twitter](https://twitter.com/tigergraphdb)
  * ## Legal
    * [Privacy Policy](https://www.tigergraph.com/privacy-policy/)
    * [Terms of Use](https://www.tigergraph.com/terms/)
    * [Sitemap](https://docs.tigergraph.com/sitemap.xml)


